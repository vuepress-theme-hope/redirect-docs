import{a2 as s,Y as a,Z as n,a3 as e}from"./framework-449699dd.js";const o={},l=e(`<p>This plugin can automatically handle redirects for your site.</p><h2 id="control-page-redirection" tabindex="-1"><a class="header-anchor" href="#control-page-redirection" aria-hidden="true">#</a> Control Page Redirection</h2><p>If you change the address of an existing page, you can use the <code>redirectFrom</code> option in Frontmatter to redirect to the address of this page, which ensures that users are redirected to the new address when they visit the old link.</p><p>If you need to redirect an existing page to a new page, you can use the <code>redirectTo</code> option in Frontmatter to set the address to redirect to. This way the page will redirect to the new address when accessed.</p><h2 id="redirect-to-pages" tabindex="-1"><a class="header-anchor" href="#redirect-to-pages" aria-hidden="true">#</a> Redirect to Pages</h2><p>You can set a redirect map by setting <code>config</code> in plugin options. You can pass in an object where each key-value pair is a map of redirects.</p><p>For each redirect map, the key is the source link of the redirect, and the value is the destination link of the redirect. The key must be an absolute path, and the value can be an absolute path or a full path.</p><p>When you pass <code>hostname</code> in the plugin options, all redirects in absolute path form will be converted to a full path by prepending <code>hostname</code> and <code>base</code>.</p><div class="hint-container tip"><p class="hint-container-title">Example</p><p>When you invoke the plugin with the following options and <code>base</code> is <code>/</code>:</p><div class="language-javascript" data-ext="js"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">redirect</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">hostname</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;https://example.com&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">config</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#98C379;">&quot;/foo.html&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;/bar.html&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#98C379;">&quot;/baz.html&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;https://example.com/qux.html&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span></code></pre></div><p>The plugin will redirect <code>/foo.html</code> to <code>https://example.com/bar.html</code> and <code>/baz.html</code> to <code>https://example.com/qux.html</code>.</p><p>And when you donâ€™t set <code>hostname</code> above, the plugin will redirect <code>/foo.html</code> to <code>/bar.html</code> and <code>/baz.html</code> to <code>https://example.com/qux.html</code>.</p></div><p>The <code>config</code> option also accepts a function whose argument is <code>App</code>, the return value of which will be parsed as a redirect map. This means you can fully customize redirects by passing a custom function.</p><div class="hint-container tip"><p class="hint-container-title">Example</p><p>Suppose we already have some articles under the <code>post</code> directory, and in an update, we rename <code>post</code> to <code>posts</code>, then we can define a redirect map like this:</p><div class="language-javascript" data-ext="js"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;">redirect</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">hostname</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;https://example.com&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">config</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">fromEntries</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pages</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">filter</span><span style="color:#ABB2BF;">(({ </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;"> }) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">startsWith</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/posts/&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(({ </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;"> }) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">path</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">/</span><span style="color:#C678DD;">^</span><span style="color:#56B6C2;">\\/</span><span style="color:#E06C75;">posts</span><span style="color:#56B6C2;">\\/</span><span style="color:#E06C75;">/</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;/post/&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">    ),</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span></code></pre></div></div><h2 id="redirecting-sites" tabindex="-1"><a class="header-anchor" href="#redirecting-sites" aria-hidden="true">#</a> Redirecting Sites</h2><p>Sometimes you may change <code>base</code> or use new domain for your site, so you may want the original site automatically redirects to the new one.</p><p>To solve this, the plugin provide <code>vp-redirect</code> cli.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">Usage:</span></span>
<span class="line"><span style="color:#ABB2BF;">  $ </span><span style="color:#98C379;">vp-redirect</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">generate</span><span style="color:#ABB2BF;"> [sourceDir]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">Options:</span></span>
<span class="line"><span style="color:#ABB2BF;">  --hostname &lt;</span><span style="color:#98C379;">hostnam</span><span style="color:#ABB2BF;">e&gt;  </span><span style="color:#98C379;">Hostname</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">redirect</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">to</span><span style="color:#ABB2BF;"> (E.g.</span><span style="color:#56B6C2;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">https://new.example.com/</span><span style="color:#ABB2BF;">) (default: </span><span style="color:#98C379;">/</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  -c, </span><span style="color:#D19A66;">--config</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">confi</span><span style="color:#ABB2BF;">g&gt;  </span><span style="color:#98C379;">Set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">path</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">to</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">config</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">file</span></span>
<span class="line"><span style="color:#ABB2BF;">  -o, </span><span style="color:#D19A66;">--output</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">outpu</span><span style="color:#ABB2BF;">t&gt;  </span><span style="color:#98C379;">Set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">the</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">output</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">directory</span><span style="color:#ABB2BF;"> (default: </span><span style="color:#98C379;">.vuepress/redirect</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  --cache &lt;</span><span style="color:#98C379;">cach</span><span style="color:#ABB2BF;">e&gt;        </span><span style="color:#98C379;">Set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">the</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">directory</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">of</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">the</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">cache</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">files</span></span>
<span class="line"><span style="color:#ABB2BF;">  -t, </span><span style="color:#D19A66;">--temp</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">tem</span><span style="color:#ABB2BF;">p&gt;      </span><span style="color:#98C379;">Set</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">the</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">directory</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">of</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">the</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">temporary</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">files</span></span>
<span class="line"><span style="color:#ABB2BF;">  --clean-cache          </span><span style="color:#98C379;">Clean</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">the</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">cache</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">files</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">before</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">generation</span></span>
<span class="line"><span style="color:#ABB2BF;">  --clean-temp           </span><span style="color:#98C379;">Clean</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">the</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">temporary</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">files</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">before</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">generation</span></span>
<span class="line"><span style="color:#ABB2BF;">  -h, </span><span style="color:#D19A66;">--help</span><span style="color:#ABB2BF;">             </span><span style="color:#98C379;">Display</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">this</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">message</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You need to pass in VuePress project source dir and also set the <code>hostname</code> option. The redirect helper cli will initialize your VuePress project to get pages, then generate and output the redirect html files to the output directory.</p><p>By default the plugin will output to <code>.vuepress/redirect</code> directory under source directory. And you should upload it to your original site to provide redirection.</p>`,17),p=[l];function t(c,r){return a(),n("div",null,p)}const i=s(o,[["render",t],["__file","guide.html.vue"]]);export{i as default};
